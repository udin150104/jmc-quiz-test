function b(){const m=new bootstrap.Modal(document.getElementById("form-modal")),g=new bootstrap.Modal(document.getElementById("delete-modal"));function h(t,n=5){const e=t.current_page,i=t.last_page;let a="";const s=(o,l=null,d=!1,f=!1)=>`
      <li class="page-item ${d?"active active-page":""} ${f?"disabled":""} rounded-0">
        <a class="page-link ${d?"":"text-dark"}  rounded-0" href="#" data-page="${f?"":o}">
          ${l??o}
        </a>
      </li>`;if(a+=s(e-1,'<i class="bi bi-caret-left"></i> Sebelumnya',!1,e===1),i<=n+2)for(let o=1;o<=i;o++)a+=s(o,null,o===e);else{a+=s(1,null,e===1);let o=Math.max(2,e-Math.floor(n/2)),l=Math.min(i-1,e+Math.floor(n/2));o>2&&(a+='<li class="page-item disabled"><span class="page-link">…</span></li>');for(let d=o;d<=l;d++)a+=s(d,null,d===e);l<i-1&&(a+='<li class="page-item disabled"><span class="page-link">…</span></li>'),a+=s(i,null,e===i)}a+=s(e+1,'Selanjutnya <i class="bi bi-caret-right"></i>',!1,e===i),$("#pagination").html(a)}$(document).on("click","#pagination .page-link",function(t){t.preventDefault();const n=parseInt($(this).data("page"));isNaN(n)||c(n)});let r="ASC",p;$(document).on("click",".sort",function(){p=$(this).data("order"),r=r==="ASC"?"DESC":"ASC";const t=$(this),n=t.clone().children().remove().end().text().trim(),e=r==="ASC"?' <i class="bi bi-arrow-up"></i>':' <i class="bi bi-arrow-down"></i>';$(".sort").each(function(){const i=$(this).clone().children().remove().end().text().trim();$(this).html(i)}),t.html(e+n),c(1)}),c(1);function c(t=1){const n=$("#search").val();$.get("/application/master/kategori/api/data",{page:t,search:n,sortBy:p,sort:r},function(e){let i="";e.data.length>0?e.data.forEach((a,s)=>{a.created_at&&a.created_at.replace(" ","T");const o=`row-${a.id}`;let l=t>1?`${t} ${s+1}`:s+1;i+=`
          <tr id="${o}" >
            <td class="text-center">${l}</td>
            <td class="text-center">
              <button type="button" class="btn btn-sm rounded-0 me-1 btn-edit" data-id="${a.id}">
                <i class="bi bi-pencil"></i>
              </button>
              <button type="button" class="btn btn-sm text-danger rounded-0 btn-delete"  data-id="${a.id}">
                <i class="bi bi-trash"></i>
              </button>
            </td>
            <td>${a.kode}</td>
            <td>${a.nama}</td>
          </tr>`}):i+='<tr><td colspan="4" class="text-muted">Belum Ada Data</td></tr>',$("#table-list tbody").html(i),h(e)})}$(document).on("click","#btn-search",function(){c(1)}),$("#search").on("keyup",function(t){t.key==="Enter"&&c(1)}),$(document).on("click","#btn-add",function(){m.show()}),$(document).on("click",".btn-batal",function(){$(".help").html(""),$("#form-data").get(0).reset(),$("#form-data").removeAttr("data-id",""),m.hide()}),$(document).on("click","#submit-action",function(){$(".help").html("");const t=$("#form-data"),n=t.serialize(),e=t.attr("data-id"),i=e?`/application/master/kategori/${e}`:"/application/master/kategori",a=e?"PUT":"POST";$.ajax({url:i,method:a,data:n,success:function(s){let o=s.message;$("#toast-message").show(),$("#toast-message .toast-body").html(o);let l=$("#pagination .page-item.active .page-link").data("page")||1;c(l),$(".btn-batal").trigger("click"),setTimeout(function(){$("#toast-message").hide(),$("#toast-message .toast-body").html("")},5e3)},error:function(s){if(s.status===422){const o=s.responseJSON.errors;for(const l in o)$(`#${l}-help`).html(o[l][0])}}})}),$(document).on("click",".btn-edit",function(){const t=$(this).data("id");$.get(`/application/master/kategori/${t}`,function(n){m.show(),$('input[name="kode"]').val(n.kode),$('input[name="nama"]').val(n.nama),$("#form-data").attr("data-id",t)})});let u;$(document).on("click","#btn-batal-delete",function(){u=null,g.hide()}),$(document).on("click",".btn-delete",function(){u=$(this).data("id"),g.show()}),$(document).on("click",".delete-action",function(){$.ajax({url:`/application/master/kategori/${u}`,type:"DELETE",success:function(t){let n=t.message;$("#toast-message").show(),$("#toast-message .toast-body").html(n);let e=$("#pagination .page-item.active .page-link").data("page")||1;c(e),$("#btn-batal-delete").trigger("click"),setTimeout(function(){$("#toast-message").hide(),$("#toast-message .toast-body").html("")},5e3)},error:function(t){console.error(t.responseText)}})})}export{b as init};
