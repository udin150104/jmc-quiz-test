function b(){const u=new bootstrap.Modal(document.getElementById("form-modal")),p=new bootstrap.Modal(document.getElementById("delete-modal"));$(document).on("click","#btn-add",function(){$("#title-form").html("Tambah Data"),u.show()}),$(document).on("click",".btn-edit",function(){const e=$(this).data("id");$.get(`/application/referensi/provinsi/${e}`,function(n){u.show(),$("#title-form").html("Ubah Data"),$('input[name="kode"]').val(n.kode),$('input[name="nama"]').val(n.nama),$("#form-data").attr("data-id",e)})});let f;$(document).on("click",".btn-delete",function(){f=$(this).data("id"),p.show()}),$(document).on("click",".delete-action",function(){$.ajax({url:`/application/referensi/provinsi/${f}`,type:"DELETE",success:function(e){let n=$("#pagination .page-item.active .page-link").data("page")||1;r(n),$("#btn-batal-delete").trigger("click")},error:function(e){console.error(e.responseText)}})}),$(document).on("click","#submit-action",function(){$(".help").html("");const e=$("#form-data"),n=e.serialize(),a=e.attr("data-id"),i=a?`/application/referensi/provinsi/${a}`:"/application/referensi/provinsi",o=a?"PUT":"POST";$.ajax({url:i,method:o,data:n,success:function(l){let t=$("#pagination .page-item.active .page-link").data("page")||1;r(t),$("#btn-batal").trigger("click")},error:function(l){if(l.status===422){const t=l.responseJSON.errors;for(const c in t)$(`#${c}-help`).html(t[c][0])}}})}),$(document).on("click","#btn-batal",function(){$(".help").html(""),$("#form-data").get(0).reset(),$("#form-data").removeAttr("data-id",""),u.hide()}),$(document).on("click","#btn-batal-delete",function(){f=null,p.hide()});function m(e,n=5){const a=e.current_page,i=e.last_page;let o="";const l=(t,c=null,s=!1,d=!1)=>`
      <li class="page-item ${s?"active":""} ${d?"disabled":""} rounded-0">
        <a class="page-link  rounded-0" href="#" data-page="${d?"":t}">
          ${c??t}
        </a>
      </li>`;if(o+=l(a-1,'<i class="bi bi-caret-left"></i>',!1,a===1),i<=n+2)for(let t=1;t<=i;t++)o+=l(t,null,t===a);else{o+=l(1,null,a===1);let t=Math.max(2,a-Math.floor(n/2)),c=Math.min(i-1,a+Math.floor(n/2));t>2&&(o+='<li class="page-item disabled"><span class="page-link">…</span></li>');for(let s=t;s<=c;s++)o+=l(s,null,s===a);c<i-1&&(o+='<li class="page-item disabled"><span class="page-link">…</span></li>'),o+=l(i,null,a===i)}o+=l(a+1,'<i class="bi bi-caret-right"></i>',!1,a===i),$("#pagination").html(o)}$(document).on("click","#pagination .page-link",function(e){e.preventDefault();const n=parseInt($(this).data("page"));isNaN(n)||r(n)});function r(e=1){const n=$("#search").val();$.get("/application/referensi/provinsi/api/data",{page:e,search:n},function(a){let i="";const o=new Date,l=[];a.data.length>0?a.data.forEach(t=>{const c=t.created_at?t.created_at.replace(" ","T"):null;let s=!1;if(c){const g=new Date(c);s=o-g<=60*800}const d=`row-${t.id}`;s&&l.push(d),i+=`
          <tr id="${d}" class="${s?"table-info":""}">
            <td>${t.nama}</td>
            <td class="text-center">
              <button type="button" class="btn btn-sm btn-secondary rounded-0 me-1 btn-edit" data-id="${t.id}">Ubah</button>
              <button type="button" class="btn btn-sm btn-danger rounded-0 btn-delete"  data-id="${t.id}">Hapus</button>
            </td>
          </tr>`}):i+='<tr><td colspan="2" class="text-muted">Belum Ada Data</td></tr>',$("#table-list tbody").html(i),m(a),l.forEach(t=>{setTimeout(()=>{$(`#${t}`).removeClass("table-info")},1e5)})})}r(1),$("#search").on("keyup",function(e){e.key==="Enter"&&r(1)}),$("#btn-reset-filter").on("click",function(){$("#search").val(""),$("#search").trigger(jQuery.Event("keyup",{key:"Enter",keyCode:13,which:13}))})}export{b as init};
